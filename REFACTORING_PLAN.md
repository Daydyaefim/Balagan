# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–µ–∫—Ç–∞ UgAgro_95

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-16
**–í–µ—Ä—Å–∏—è:** 1.0
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** –¢—Ä–µ–±—É–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **–†–∞–∑–º–µ—Ä:** 4164 —Å—Ç—Ä–æ–∫–∏ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- **–§—É–Ω–∫—Ü–∏–∏:** 27 (2 –º–æ–Ω–æ–ª–∏—Ç–∞: `logicTask` - 919 —Å—Ç—Ä–æ–∫, `callback` - 822 —Å—Ç—Ä–æ–∫)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Settings:** 199 –ø–æ–ª–µ–π (~500-600 bytes)
- **FreeRTOS –∑–∞–¥–∞—á–∏:** 3 (logicTask, modbusTask, networkTimeTask)
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥:** ~600 —Å—Ç—Ä–æ–∫ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ DRY)

### –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: 6/10
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–∞—è –∏ —Ä–∞–±–æ—Ç–∞—é—â–∞—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ FreeRTOS –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MQTT –∏ Web API
- ‚ùå –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –≤—ã—Å–æ–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é
- ‚ùå Race conditions –∏–∑-–∑–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ —Å–µ–º–∞—Ñ–æ—Ä–∞
- ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üéØ –¶–µ–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

1. **–ü–æ–≤—ã—Å–∏—Ç—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - —É—Å—Ç—Ä–∞–Ω–∏—Ç—å race conditions –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏
2. **–£–ª—É—á—à–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** - —Ä–∞–∑–±–∏—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –º–æ–¥—É–ª–∏
3. **–°–Ω–∏–∑–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø DRY
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞–º—è—Ç—å** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
5. **–ü–æ–≤—ã—Å–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –∑–∞—â–∏—Ç—É –ø–∞—Ä–æ–ª–µ–π

---

## üìã –≠—Ç–∞–ø—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### üî¥ –≠–¢–ê–ü 1: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (1-2 –Ω–µ–¥–µ–ª–∏)

#### 1.1 –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ Race Conditions ‚ö†Ô∏è –ü–†–ò–û–†–ò–¢–ï–¢ #1
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ–º–∞—Ñ–æ—Ä `mtx` —Å–æ–∑–¥–∞–Ω (—Å—Ç—Ä–æ–∫–∞ 61), –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `sett` —á–∏—Ç–∞–µ—Ç—Å—è/–ø–∏—à–µ—Ç—Å—è –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```cpp
// –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö –¥–æ—Å—Ç—É–ø–∞ –∫ sett
void updateSettings() {
  if (xSemaphoreTake(mtx, portMAX_DELAY) == pdTRUE) {
    sett.minTemp = newValue;
    xSemaphoreGive(mtx);
  }
}
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å `xSemaphoreTake()` –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ `sett` –≤ `logicTask()` (—Å—Ç—Ä–æ–∫–∏ 2071-2990)
- [ ] –î–æ–±–∞–≤–∏—Ç—å `xSemaphoreTake()` –≤ `callback()` (—Å—Ç—Ä–æ–∫–∏ 965-1787)
- [ ] –î–æ–±–∞–≤–∏—Ç—å `xSemaphoreTake()` –≤ HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö (—Å—Ç—Ä–æ–∫–∏ 3126-4160)
- [ ] –î–æ–±–∞–≤–∏—Ç—å `xSemaphoreGive()` –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å RAII-–æ–±–µ—Ä—Ç–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Å–µ–º–∞—Ñ–æ—Ä–∞

**–ú–µ—Å—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- `logicTask()`: ~50 –º–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ `sett`
- `callback()`: ~93 –ø–æ–ª—è JSON
- HTTP handlers: POST /settings (~93 –ø–æ–ª—è)

**–û—Ü–µ–Ω–∫–∞:** 3-4 –¥–Ω—è
**–†–∏—Å–∫:** –°—Ä–µ–¥–Ω–∏–π (–º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏)

---

#### 1.2 –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–∏ logicTask() ‚ö†Ô∏è –ü–†–ò–û–†–ò–¢–ï–¢ #2
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è 919 —Å—Ç—Ä–æ–∫ —Å cyclomatic complexity > 200

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥—É–ª–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞:**
```
logicTask()  (–≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª ~100 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ handleWindowControl()       (80 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ handleHeating()              (40 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ handleFan()                  (50 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ handleFogging()              (150 —Å—Ç—Ä–æ–∫)
‚îÇ  ‚îú‚îÄ calculateFogTiming()
‚îÇ  ‚îú‚îÄ checkFogConditions()
‚îÇ  ‚îî‚îÄ executeFogCycle()
‚îú‚îÄ handleWatering()             (350 —Å—Ç—Ä–æ–∫)
‚îÇ  ‚îú‚îÄ handleMorningWatering()
‚îÇ  ‚îú‚îÄ handleAutoWatering()
‚îÇ  ‚îú‚îÄ handleManualWatering()
‚îÇ  ‚îú‚îÄ handleForcedWatering()
‚îÇ  ‚îî‚îÄ handleHydroMix()
‚îú‚îÄ handleSolutionHeating()      (40 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ handleFillTank()             (60 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ handleWindProtection()       (50 —Å—Ç—Ä–æ–∫)
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `climate_control.h` –∏ `climate_control.cpp`
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å 35+ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ `struct LogicState`
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `GreenhouseController` –¥–ª—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `logicTask()` –¥–ª—è –≤—ã–∑–æ–≤–∞ –º–æ–¥—É–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è

**–û—Ü–µ–Ω–∫–∞:** 5-7 –¥–Ω–µ–π
**–†–∏—Å–∫:** –í—ã—Å–æ–∫–∏–π (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏)

---

#### 1.3 –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ ‚ö†Ô∏è –ü–†–ò–û–†–ò–¢–ï–¢ #3
**–ü—Ä–æ–±–ª–µ–º–∞:** ~600 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –º–µ–∂–¥—É `callback()` –∏ POST /settings

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø–∞—Ä—Å–∏–Ω–≥–∞

```cpp
// –ù–æ–≤—ã–π —Ñ–∞–π–ª: settings_parser.h
bool updateSettingFromJson(JsonDocument& doc, const char* key,
                           void* field, FieldType type, bool& needSave);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
updateSettingFromJson(doc, "minTemp", &sett.minTemp, FLOAT, needSave);
updateSettingFromJson(doc, "maxTemp", &sett.maxTemp, FLOAT, needSave);
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `settings_parser.h` –∏ `settings_parser.cpp`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `updateSettingFromJson()`
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö 93 –ø–æ–ª–µ–π Settings
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤ `callback()` (—Å—Ç—Ä–æ–∫–∏ 989-1787)
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤ POST /settings (—Å—Ç—Ä–æ–∫–∏ 3250-4160)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –∑–Ω–∞—á–µ–Ω–∏–π

**–û—Ü–µ–Ω–∫–∞:** 3-4 –¥–Ω—è
**–†–∏—Å–∫:** –ù–∏–∑–∫–∏–π (–ø—Ä–æ—Å—Ç–∞—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥-–æ–ø–µ—Ä–∞—Ü–∏—è)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ 558+ —Å—Ç—Ä–æ–∫

---

### üü† –≠–¢–ê–ü 2: –í–ê–ñ–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø (2-3 –Ω–µ–¥–µ–ª–∏)

#### 2.1 –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö JSON
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ NaN, infinity, –≤—ã—Ö–æ–¥–∞ –∑–∞ –¥–∏–∞–ø–∞–∑–æ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
```cpp
struct FieldValidator {
  float min, max;
  bool allowNaN;
};

bool validateField(float value, const FieldValidator& validator) {
  if (!validator.allowNaN && isnan(value)) return false;
  if (isinf(value)) return false;
  if (value < validator.min || value > validator.max) return false;
  return true;
}
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `validation.h`
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ `updateSettingFromJson()`
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- [ ] –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å MQTT —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

**–û—Ü–µ–Ω–∫–∞:** 2-3 –¥–Ω—è

---

#### 2.2 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ–∑–∏—Ü–∏–∏ –æ–∫–Ω–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç—Ä–æ–∫–∞ 1815 - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–æ–∑–∏—Ü–∏–∏

```cpp
// –¢–ï–ö–£–©–ò–ô –ö–û–î (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
windowPos = constrain(windowPos + percentage, 0, 100);  // –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç!

// –ü–†–ê–í–ò–õ–¨–ù–´–ô –ö–û–î:
windowPos = constrain(percentage, 0, 100);  // –ó–∞–º–µ–Ω—è–µ—Ç
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç –≤ `updateWindowPosition()` (—Å—Ç—Ä–æ–∫–∞ 1815)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –æ–∫–Ω–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–∞–ª–∏–±—Ä–æ–≤–∫—É –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è

**–û—Ü–µ–Ω–∫–∞:** 1 –¥–µ–Ω—å
**–†–∏—Å–∫:** –°—Ä–µ–¥–Ω–∏–π (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

#### 2.3 –ü–µ—Ä–µ–Ω–æ—Å —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∑–∞—â–∏—â–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä–æ–ª—å WiFi –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–µ (—Å—Ç—Ä–æ–∫–∞ 52)

```cpp
// –¢–ï–ö–£–©–ò–ô –ö–û–î (–ù–ï–ë–ï–ó–û–ü–ê–°–ù–û):
const char *WIFI_PASS = "12345678";  // –í–∏–¥–Ω–∞ –≤ –∫–æ–¥–µ!

// –ù–û–í–´–ô –ö–û–î:
#include <Preferences.h>
Preferences prefs;
String wifiPass = prefs.getString("wifi_pass", "");
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ESP32 NVS (Non-Volatile Storage)
- [ ] –°–æ–∑–¥–∞—Ç—å Web UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ WiFi
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- [ ] –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å MQTT –ø–∞—Ä–æ–ª–∏
- [ ] –£–¥–∞–ª–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–û—Ü–µ–Ω–∫–∞:** 2-3 –¥–Ω—è

---

#### 2.4 –£–ª—É—á—à–µ–Ω–∏–µ RTC —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–µ—Ç–Ω–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –º–æ–∂–µ—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è

**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ª–µ—Ç–Ω–µ–µ –≤—Ä–µ–º—è
- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É NTP –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ WiFi
- [ ] –î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ RTC –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å drift –º–µ–∂–¥—É RTC –∏ NTP
- [ ] –£–≤–µ–¥–æ–º–ª—è—Ç—å —á–µ—Ä–µ–∑ MQTT –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–û—Ü–µ–Ω–∫–∞:** 2-3 –¥–Ω—è

---

### üü° –≠–¢–ê–ü 3: –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ò –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (3-4 –Ω–µ–¥–µ–ª–∏)

#### 3.1 –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Settings –Ω–∞ –º–æ–¥—É–ª–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** 199 –ø–æ–ª–µ–π –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

**–†–µ—à–µ–Ω–∏–µ:**
```cpp
struct ClimateSettings {
  float minTemp, maxTemp;
  float minHum, maxHum;
  uint32_t openTime, closeTime;
};

struct HeatingSettings {
  float heatOn, heatOff;
  float solOn, solOff;
};

struct FoggingSettings {
  // 19 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç—É–º–∞–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
};

struct WateringSettings {
  // 28 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–ª–∏–≤–∞
};

struct SystemSettings {
  ClimateSettings climate;
  HeatingSettings heating;
  FoggingSettings fogging;
  WateringSettings watering;
};
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
- [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å Settings –Ω–∞ 6 —Å—Ç—Ä—É–∫—Ç—É—Ä
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `saveSettings()` –∏ `loadSettings()`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å MQTT –ø—É–±–ª–∏–∫–∞—Ü–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π

**–û—Ü–µ–Ω–∫–∞:** 5-6 –¥–Ω–µ–π

---

#### 3.2 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ StaticJsonDocument
**–ü—Ä–æ–±–ª–µ–º–∞:** 17 DynamicJsonDocument —Å–æ–∑–¥–∞—é—Ç –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**
```cpp
// –í–º–µ—Å—Ç–æ:
DynamicJsonDocument doc(2048);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
StaticJsonDocument<2048> doc;
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã JSON –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª—É—á–∞—è
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å Dynamic –Ω–∞ Static –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã –±—É—Ñ–µ—Ä–æ–≤

**–û—Ü–µ–Ω–∫–∞:** 2-3 –¥–Ω—è

---

#### 3.3 –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
UgAgro_95/
‚îú‚îÄ UgAgro_95.ino (4164 —Å—Ç—Ä–æ–∫–∏)
‚îî‚îÄ data/
   ‚îî‚îÄ index.html
```

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
UgAgro_95/
‚îú‚îÄ UgAgro_95.ino (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª ~200 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ src/
‚îÇ  ‚îú‚îÄ config/
‚îÇ  ‚îÇ  ‚îú‚îÄ pins.h
‚îÇ  ‚îÇ  ‚îú‚îÄ settings.h
‚îÇ  ‚îÇ  ‚îî‚îÄ defaults.h
‚îÇ  ‚îú‚îÄ core/
‚îÇ  ‚îÇ  ‚îú‚îÄ greenhouse_controller.h/cpp
‚îÇ  ‚îÇ  ‚îî‚îÄ logic_state.h
‚îÇ  ‚îú‚îÄ modules/
‚îÇ  ‚îÇ  ‚îú‚îÄ climate_control.h/cpp
‚îÇ  ‚îÇ  ‚îú‚îÄ heating_control.h/cpp
‚îÇ  ‚îÇ  ‚îú‚îÄ fogging_control.h/cpp
‚îÇ  ‚îÇ  ‚îú‚îÄ watering_control.h/cpp
‚îÇ  ‚îÇ  ‚îî‚îÄ window_control.h/cpp
‚îÇ  ‚îú‚îÄ sensors/
‚îÇ  ‚îÇ  ‚îú‚îÄ modbus_manager.h/cpp
‚îÇ  ‚îÇ  ‚îî‚îÄ rtc_manager.h/cpp
‚îÇ  ‚îú‚îÄ network/
‚îÇ  ‚îÇ  ‚îú‚îÄ wifi_manager.h/cpp
‚îÇ  ‚îÇ  ‚îú‚îÄ mqtt_manager.h/cpp
‚îÇ  ‚îÇ  ‚îî‚îÄ web_server.h/cpp
‚îÇ  ‚îú‚îÄ storage/
‚îÇ  ‚îÇ  ‚îú‚îÄ settings_storage.h/cpp
‚îÇ  ‚îÇ  ‚îú‚îÄ history_storage.h/cpp
‚îÇ  ‚îÇ  ‚îî‚îÄ settings_parser.h/cpp
‚îÇ  ‚îî‚îÄ utils/
‚îÇ     ‚îú‚îÄ validation.h/cpp
‚îÇ     ‚îî‚îÄ logger.h/cpp
‚îî‚îÄ data/
   ‚îî‚îÄ index.html
```

**–û—Ü–µ–Ω–∫–∞:** 7-10 –¥–Ω–µ–π

---

#### 3.4 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏
**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `logicTask()` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `const char*` –≤–º–µ—Å—Ç–æ String –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (isNight, currentHour)
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ history (20 –∑–∞–ø–∏—Å–µ–π √ó 52 bytes = 1KB)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ (heap, stack)

**–û—Ü–µ–Ω–∫–∞:** 3-4 –¥–Ω—è

---

#### 3.5 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤
**–†–µ—à–µ–Ω–∏–µ:**
```cpp
// platformio.ini
[env:native]
platform = native
test_framework = unity

// test/test_fogging.cpp
void test_fog_duration_calculation() {
  float duration = calcFogDuration(20.0, 80.0, 15.0, 30.0);
  TEST_ASSERT_EQUAL_FLOAT(45000.0, duration);
}
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PlatformIO –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `calcFogDuration()`, `calcFogInterval()`
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –ª–æ–≥–∏–∫–∏ –ø–æ–ª–∏–≤–∞
- [ ] –°–æ–∑–¥–∞—Ç—å mock-–æ–±—ä–µ–∫—Ç—ã –¥–ª—è –¥–∞—Ç—á–∏–∫–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–û—Ü–µ–Ω–∫–∞:** 5-7 –¥–Ω–µ–π

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

| –≠—Ç–∞–ø | –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –¢—Ä—É–¥–æ–µ–º–∫–æ—Å—Ç—å | –†–∏—Å–∫ | –í—ã–≥–æ–¥–∞ |
|------|--------|-----------|--------------|------|--------|
| 1.1 | Race conditions | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | 3-4 –¥–Ω—è | –°—Ä–µ–¥–Ω–∏–π | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å |
| 1.2 | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ logicTask | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | 5-7 –¥–Ω–µ–π | –í—ã—Å–æ–∫–∏–π | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å |
| 1.3 | –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | 3-4 –¥–Ω—è | –ù–∏–∑–∫–∏–π | -558 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ |
| 2.1 | –í–∞–ª–∏–¥–∞—Ü–∏—è JSON | üü† –í–∞–∂–Ω—ã–π | 2-3 –¥–Ω—è | –ù–∏–∑–∫–∏–π | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å |
| 2.2 | –õ–æ–≥–∏–∫–∞ –æ–∫–Ω–∞ | üü† –í–∞–∂–Ω—ã–π | 1 –¥–µ–Ω—å | –°—Ä–µ–¥–Ω–∏–π | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å |
| 2.3 | –ó–∞—â–∏—Ç–∞ –ø–∞—Ä–æ–ª–µ–π | üü† –í–∞–∂–Ω—ã–π | 2-3 –¥–Ω—è | –ù–∏–∑–∫–∏–π | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| 2.4 | RTC —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è | üü† –í–∞–∂–Ω—ã–π | 2-3 –¥–Ω—è | –ù–∏–∑–∫–∏–π | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å |
| 3.1 | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ Settings | üü° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | 5-6 –¥–Ω–µ–π | –°—Ä–µ–¥–Ω–∏–π | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ |
| 3.2 | StaticJson | üü° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | 2-3 –¥–Ω—è | –ù–∏–∑–∫–∏–π | –ü–∞–º—è—Ç—å |
| 3.3 | –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | üü° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | 7-10 –¥–Ω–µ–π | –í—ã—Å–æ–∫–∏–π | –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å |
| 3.4 | –ü–∞–º—è—Ç—å | üü° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | 3-4 –¥–Ω—è | –ù–∏–∑–∫–∏–π | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
| 3.5 | –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã | üü° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | 5-7 –¥–Ω–µ–π | –°—Ä–µ–¥–Ω–∏–π | –ö–∞—á–µ—Å—Ç–≤–æ |

**–ò—Ç–æ–≥–æ:** 40-56 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π (8-11 –Ω–µ–¥–µ–ª—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ –æ–¥–∏–Ω–æ—á–∫—É)

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

### –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 1 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π)
- [ ] –ù–µ—Ç race conditions (–≤—Å–µ –¥–æ—Å—Ç—É–ø—ã –∫ `sett` –∑–∞—â–∏—â–µ–Ω—ã —Å–µ–º–∞—Ñ–æ—Ä–æ–º)
- [ ] –§—É–Ω–∫—Ü–∏—è `logicTask()` —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ –º–æ–¥—É–ª–∏ <200 —Å—Ç—Ä–æ–∫
- [ ] –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ <50 —Å—Ç—Ä–æ–∫
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

### –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 2 (–≤–∞–∂–Ω—ã–π)
- [ ] –í—Å–µ –≤—Ö–æ–¥–Ω—ã–µ JSON –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è
- [ ] –û–∫–Ω–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–ø–æ–∑–∏—Ü–∏—è 0-100%)
- [ ] –ü–∞—Ä–æ–ª–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ
- [ ] RTC —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞–¥–µ–∂–Ω–æ

### –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 3 (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- [ ] –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–±–∏—Ç –Ω–∞ –º–æ–¥—É–ª–∏ (<300 —Å—Ç—Ä–æ–∫ –Ω–∞ —Ñ–∞–π–ª)
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ heap –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ
- [ ] 80%+ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã
1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ç–∫—É `refactoring-v2`
2. –í—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∂–¥—É—é –∑–∞–¥–∞—á—É –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–º–º–∏—Ç–µ
3. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç–µ–Ω–¥–µ
4. Merge –≤ main —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –∫–∞–∫ `UgAgro_95_legacy.ino`

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **IDE:** PlatformIO (–ª—É—á—à–µ —á–µ–º Arduino IDE –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π:** Git
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** Unity Test Framework
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑:** cppcheck, clang-tidy
- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** clang-format

---

## üö® –†–∏—Å–∫–∏ –∏ –∏—Ö –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è |
|------|-------------|---------|-------------|
| –ü–æ–ª–æ–º–∫–∞ –ª–æ–≥–∏–∫–∏ –ø–æ–ª–∏–≤–∞ | –°—Ä–µ–¥–Ω—è—è | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç–µ–Ω–¥–µ, –æ—Ç–∫–∞—Ç |
| –†–µ–≥—Ä–µ—Å—Å–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã |
| –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ heap, –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º | –ù–∏–∑–∫–∞—è | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–µ–ø–ª–∏—Ü–µ |
| –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ |

---

## üìö –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞

1. **Design Patterns in Embedded Systems** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
2. **FreeRTOS Documentation** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é
3. **ESP32 Technical Reference Manual** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏
4. **Clean Code by Robert Martin** - –ø—Ä–∏–Ω—Ü–∏–ø—ã –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —ç—Ç–æ—Ç –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
2. üî≤ –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Å –∫–æ–º–∞–Ω–¥–æ–π
3. üî≤ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PlatformIO –ø—Ä–æ–µ–∫—Ç
4. üî≤ –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ç–µ–Ω–¥
5. üî≤ –ù–∞—á–∞—Ç—å —Å –≠—Ç–∞–ø–∞ 1.1 (Race Conditions)

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –≤–æ–ø—Ä–æ—Å—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫:
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: `UgAgro_95_Analysis_Report.md`
- –ö—Ä–∞—Ç–∫–æ–º—É —Ä–µ–∑—é–º–µ: `UgAgro_95_SUMMARY.txt`
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–º—É –æ–±–∑–æ—Ä—É: `UgAgro_95_Architecture.txt`

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-16
**–ê–≤—Ç–æ—Ä –ø–ª–∞–Ω–∞:** AI Code Analysis System
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
