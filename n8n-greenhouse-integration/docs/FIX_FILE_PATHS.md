# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–£–¢–ï–ô –ö –§–ê–ô–õ–ê–ú - –°–†–û–ß–ù–û!

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–í—Å–µ workflows –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–∞ –Ω–æ–¥–∞—Ö "–ß–∏—Ç–∞—Ç—å –ë–î" –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. –£–∫–∞–∑–∞–Ω—ã **–Ω–µ–≤–µ—Ä–Ω—ã–µ –ø—É—Ç–∏** `/data/...` (—Ç–∞–∫–æ–π –ø–∞–ø–∫–∏ –Ω–µ—Ç –Ω–∞ Beget)
2. **–§–∞–π–ª—ã –ë–î –Ω–µ —Å–æ–∑–¥–∞–Ω—ã**

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï –í 2 –®–ê–ì–ê

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä

#### 1.1 –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª—ã —Å GitHub

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub –≤ –ø–∞–ø–∫—É `database-files`:
```
https://github.com/Daydyaefim/Balagan/tree/claude/n8n-esp32-greenhouse-integration-0182vddx43zfdqyfMHo57bfV/n8n-greenhouse-integration/database-files
```

–°–∫–∞—á–∞–π—Ç–µ –≤—Å–µ 4 —Ñ–∞–π–ª–∞:
- ‚úÖ `ugagro_readings.json`
- ‚úÖ `telegram_alert_states.json`
- ‚úÖ `ugagro_alerts_history.json`
- ‚úÖ `cleanup_log.json`

#### 1.2 –ó–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ—Ä–µ–∑ Beget File Manager

1. **–í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å Beget** ‚Üí **–§–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä**

2. **–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É:**
   - –ö–ª–∏–∫–Ω–∏—Ç–µ **–ù–æ–≤–∞—è –ø–∞–ø–∫–∞**
   - –ù–∞–∑–æ–≤–∏—Ç–µ: `greenhouse-data`
   - –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å**

3. **–ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É** `greenhouse-data`

4. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã:**
   - –ù–∞–∂–º–∏—Ç–µ **–ó–∞–≥—Ä—É–∑–∏—Ç—å**
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ 4 —Å–∫–∞—á–∞–Ω–Ω—ã—Ö JSON —Ñ–∞–π–ª–∞
   - –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –í—ã –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å `/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/`
   - –í–Ω—É—Ç—Ä–∏ 4 —Ñ–∞–π–ª–∞: `ugagro_readings.json`, `telegram_alert_states.json`, `ugagro_alerts_history.json`, `cleanup_log.json`

---

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø—É—Ç–∏ –≤ –ö–ê–ñ–î–û–ú workflow

#### üîç –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π –ª–æ–≥–∏–Ω –Ω–∞ Beget?

–í **–§–∞–π–ª–æ–≤–æ–º –º–µ–Ω–µ–¥–∂–µ—Ä–µ** Beget —Å–º–æ—Ç—Ä–∏—Ç–µ –≤–µ—Ä—Ö–Ω–∏–π –ø—É—Ç—å:
```
/home/john/public_html  ‚Üê "john" —ç—Ç–æ –≤–∞—à –ª–æ–≥–∏–Ω
```

–ò–ª–∏:
```
/home/u123456/public_html  ‚Üê "u123456" —ç—Ç–æ –≤–∞—à –ª–æ–≥–∏–Ω
```

**–ó–∞–ø–æ–º–Ω–∏—Ç–µ –≤–∞—à –ª–æ–≥–∏–Ω!** –û–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø—É—Ç–µ–π.

---

#### Workflow #1: MQTT Data Pipeline

**–ù–æ–¥–∞ "–ß–∏—Ç–∞—Ç—å –ë–î":**
1. –û—Ç–∫—Ä–æ–π—Ç–µ workflow **01 - MQTT Data Pipeline**
2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–¥—É **"–ß–∏—Ç–∞—Ç—å –ë–î"**
3. –í –ø–æ–ª–µ **File Path** –∑–∞–º–µ–Ω–∏—Ç–µ:
   ```
   /data/ugagro_readings.json
   ```
   –ù–∞:
   ```
   /home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/ugagro_readings.json
   ```
4. –ù–∞–∂–º–∏—Ç–µ **Save** –Ω–∞ –Ω–æ–¥–µ

**–ù–æ–¥–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ë–î":**
1. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–¥—É **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ë–î"**
2. –í –ø–æ–ª–µ **File Path** –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ç–æ—Ç –∂–µ –ø—É—Ç—å
3. –ù–∞–∂–º–∏—Ç–µ **Save**

4. –ù–∞–∂–º–∏—Ç–µ **Save** –Ω–∞ workflow

---

#### Workflow #2: Critical Alerts Monitor

**–ù–æ–¥–∞ "–ß–∏—Ç–∞—Ç—å –ü–æ—Å–ª–µ–¥–Ω–∏–µ –î–∞–Ω–Ω—ã–µ":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/ugagro_readings.json
```

**–ù–æ–¥–∞ "–ß–∏—Ç–∞—Ç—å –°–æ—Å—Ç–æ—è–Ω–∏—è –û–ø–æ–≤–µ—â–µ–Ω–∏–π":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/telegram_alert_states.json
```

**–ù–æ–¥–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ò—Å—Ç–æ—Ä–∏—é":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/ugagro_alerts_history.json
```

–ù–µ –∑–∞–±—É–¥—å—Ç–µ **Save** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã –∏ **Save** –Ω–∞ workflow!

---

#### Workflow #3: Telegram Callback Handler

**–ù–æ–¥–∞ "–ß–∏—Ç–∞—Ç—å –°–æ—Å—Ç–æ—è–Ω–∏—è":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/telegram_alert_states.json
```

**–ù–æ–¥–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –°–æ—Å—Ç–æ—è–Ω–∏—è":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/telegram_alert_states.json
```

---

#### Workflow #4: Web Dashboard API

**–ù–æ–¥–∞ "–ß–∏—Ç–∞—Ç—å –ë–î":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/ugagro_readings.json
```

---

#### Workflow #5: Data Rotation & Cleanup

**–ù–æ–¥–∞ "–ß–∏—Ç–∞—Ç—å –ü–æ–∫–∞–∑–∞–Ω–∏—è":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/ugagro_readings.json
```

**–ù–æ–¥–∞ "–ß–∏—Ç–∞—Ç—å –ò—Å—Ç–æ—Ä–∏—é –û–ø–æ–≤–µ—â–µ–Ω–∏–π":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/ugagro_alerts_history.json
```

**–ù–æ–¥–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ü–æ–∫–∞–∑–∞–Ω–∏—è":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/ugagro_readings.json
```

**–ù–æ–¥–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –û–ø–æ–≤–µ—â–µ–Ω–∏—è":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/ugagro_alerts_history.json
```

**–ù–æ–¥–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –õ–æ–≥":**
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/cleanup_log.json
```

---

#### Workflow #6: Web Dashboard (Simple) ‚≠ê

**–ù–æ–¥–∞ "–ß–∏—Ç–∞—Ç—å –î–∞–Ω–Ω—ã–µ":**

–≠—Ç–æ—Ç workflow —É–∂–µ –∏–º–µ–µ—Ç –ø–æ—á—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å:
```
/home/USERNAME/greenhouse-data/ugagro_readings.json
```

–ó–∞–º–µ–Ω–∏—Ç–µ `USERNAME` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω:
```
/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/ugagro_readings.json
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø—É—Ç–µ–π:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Workflow #1**
2. –ù–∞–∂–º–∏—Ç–µ **Test workflow**
3. –î–æ–∂–¥–∏—Ç–µ—Å—å MQTT —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç ESP32 (–¥–æ 30 —Å–µ–∫—É–Ω–¥)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ **–∑–µ–ª–µ–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞ –¥–æ—à–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞**
5. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–¥—É **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ë–î"** ‚Üí –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–µ–ª–µ–Ω—ã–µ –≥–∞–ª–æ—á–∫–∏

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî **–∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤—Å–µ workflows!**

---

## üéØ –ß–µ–∫–ª–∏—Å—Ç (–≤—Å–µ–≥–æ 13 –ø—É—Ç–µ–π)

- [ ] Workflow #1 - 2 –ø—É—Ç–∏
- [ ] Workflow #2 - 3 –ø—É—Ç–∏
- [ ] Workflow #3 - 2 –ø—É—Ç–∏
- [ ] Workflow #4 - 1 –ø—É—Ç—å
- [ ] Workflow #5 - 5 –ø—É—Ç–µ–π
- [ ] Workflow #6 - 1 –ø—É—Ç—å

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### "File not found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ `/home/–í–ê–®_–õ–û–ì–ò–ù/greenhouse-data/`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ª–æ–≥–∏–Ω —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### "Permission denied"
- –í Beget File Manager –∫–ª–∏–∫–Ω–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ —Ñ–∞–π–ª
- **–°–≤–æ–π—Å—Ç–≤–∞** ‚Üí **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** ‚Üí —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `666`

### Workflow –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞–∂–∞–ª–∏ **Save** –Ω–∞ –Ω–æ–¥–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞–∂–∞–ª–∏ **Save** –Ω–∞ workflow
- –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow –∑–∞–Ω–æ–≤–æ

---

## üí° –°–æ–≤–µ—Ç

–ó–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ **–ø–æ –æ–¥–Ω–æ–º—É workflow –∑–∞ —Ä–∞–∑**, –ø—Ä–æ–≤–µ—Ä—è—è –∫–∞–∂–¥—ã–π:

1. –ò—Å–ø—Ä–∞–≤–∏–ª–∏ Workflow #1 ‚Üí **Test workflow** ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç? ‚úÖ
2. –ò—Å–ø—Ä–∞–≤–∏–ª–∏ Workflow #4 ‚Üí **Test workflow** ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç? ‚úÖ
3. –ò —Ç–∞–∫ –¥–∞–ª–µ–µ...

---

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É—Ç–µ–π –≤—Å—ë –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç!** üöÄ
